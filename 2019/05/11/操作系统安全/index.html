<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>操作系统安全 | Altm4nz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="0x00 基本概念0.1 信息安全评估标准 TCSEC A  ：校验级保护，提供低级别手段 B3：安全域，数据隐藏与分层，屏蔽 B2:  结构化内容保护，支持硬件保护 B1：标记安全保护，如System V等 C2：有自主的访问安全性，区分用户 C1：不区分用户，基本的访问控制 D：没有安全性可言，例如MS DOS">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统安全">
<meta property="og:url" content="http://altman.vip/2019/05/11/操作系统安全/index.html">
<meta property="og:site_name" content="Altm4nz">
<meta property="og:description" content="0x00 基本概念0.1 信息安全评估标准 TCSEC A  ：校验级保护，提供低级别手段 B3：安全域，数据隐藏与分层，屏蔽 B2:  结构化内容保护，支持硬件保护 B1：标记安全保护，如System V等 C2：有自主的访问安全性，区分用户 C1：不区分用户，基本的访问控制 D：没有安全性可言，例如MS DOS">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://altman.vip/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%883.53.57.png">
<meta property="og:image" content="http://altman.vip/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%884.06.25.png">
<meta property="og:image" content="http://altman.vip/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%886.56.28.png">
<meta property="og:image" content="http://altman.vip/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%886.56.28-1.png">
<meta property="og:image" content="http://altman.vip/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-12%20%E4%B8%8B%E5%8D%883.11.59.png">
<meta property="og:image" content="http://altman.vip/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-12%20%E4%B8%8B%E5%8D%883.29.50.png">
<meta property="og:image" content="http://altman.vip/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-14%20%E4%B8%8A%E5%8D%8811.27.33.png">
<meta property="og:updated_time" content="2019-05-27T06:22:01.381Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="操作系统安全">
<meta name="twitter:description" content="0x00 基本概念0.1 信息安全评估标准 TCSEC A  ：校验级保护，提供低级别手段 B3：安全域，数据隐藏与分层，屏蔽 B2:  结构化内容保护，支持硬件保护 B1：标记安全保护，如System V等 C2：有自主的访问安全性，区分用户 C1：不区分用户，基本的访问控制 D：没有安全性可言，例如MS DOS">
<meta name="twitter:image" content="http://altman.vip/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%883.53.57.png">
  
    <link rel="alternate" href="/atom.xml" title="Altm4nz" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/pokemon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

</head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Altm4nz" rel="home"> Altm4nz </a>
            
          </h1>
          
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/friend">friend</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-操作系统安全" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      操作系统安全
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2019/05/11/操作系统安全/" class="article-date">
	  <time datetime="2019-05-11T07:30:08.000Z" itemprop="datePublished">May 11, 2019</time>
	</a>

       
      
	<span id="busuanzi_container_page_pv">
	  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="0x00-基本概念"><a href="#0x00-基本概念" class="headerlink" title="0x00 基本概念"></a>0x00 基本概念</h1><h2 id="0-1-信息安全评估标准-TCSEC"><a href="#0-1-信息安全评估标准-TCSEC" class="headerlink" title="0.1 信息安全评估标准 TCSEC"></a>0.1 信息安全评估标准 TCSEC</h2><ul>
<li>A  ：校验级保护，提供低级别手段</li>
<li>B3：安全域，数据隐藏与分层，屏蔽</li>
<li>B2:  结构化内容保护，支持硬件保护</li>
<li>B1：标记安全保护，如System V等</li>
<li>C2：有自主的访问安全性，区分用户</li>
<li>C1：不区分用户，基本的访问控制</li>
<li><p>D：没有安全性可言，例如MS DOS</p>
<a id="more"></a>
<p><strong>Windows的C2级别的安全性策略</strong></p>
</li>
<li><p>强制的用户标识和认证</p>
<p> 所有用户都必须以唯一的登录标识和密码来鉴别自身</p>
</li>
<li><p>自主控制访问</p>
<p>资源的所有者必须能够控制对资源的访问</p>
</li>
<li><p>可记账性和审核</p>
<p>能够审计所有安全相关事件和个人活动</p>
<p>只有管理员才有权限访问</p>
</li>
<li><p>对象的重用</p>
<p>必须能够保护对象在完成其使命后，不再被其他对象所利用</p>
</li>
</ul>
<h2 id="0-2-windows系统安全概述"><a href="#0-2-windows系统安全概述" class="headerlink" title="0.2.windows系统安全概述"></a>0.2.windows系统安全概述</h2><h3 id="0-2-1win的安全体系结构"><a href="#0-2-1win的安全体系结构" class="headerlink" title="0.2.1win的安全体系结构"></a>0.2.1win的安全体系结构</h3><ul>
<li><p>内核模式 (Kernel mode)</p>
<p>内核模式中的代码具有极高的特权，可以直接对硬件进行操作和直接访问所有的内存空间。</p>
</li>
<li><p>用户模式(User mode)</p>
<p>用户模式的代码拥有较低的特权，不能对硬件直接进行访问，内存访问受限。</p>
</li>
</ul>
<p><img src="/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%883.53.57.png" alt=""></p>
<h3 id="0-2-2-本地安全授权-LSA"><a href="#0-2-2-本地安全授权-LSA" class="headerlink" title="0.2.2 本地安全授权 LSA"></a>0.2.2 本地安全授权 LSA</h3><ul>
<li>LSA负责是所有本地和远程的用户登录生效，生成安全访问令牌</li>
<li>访问令牌：访问令牌是一个二进制的数据包，它描述了用户的访问权限以及用户所属地组。</li>
<li>管理本地安全策略</li>
<li>LSA负责记录<strong>安全引用监视器</strong>的任何审核消息所产生的事件日志。</li>
</ul>
<h3 id="0-2-3-安全引用监控器SRM"><a href="#0-2-3-安全引用监控器SRM" class="headerlink" title="0.2.3 安全引用监控器SRM"></a>0.2.3 安全引用监控器SRM</h3><ul>
<li>SRM和对象管理器联合起来。实施控制访问策略和审核策略。</li>
<li>SRM在对象句柄创建时进行安全性检查，而并不是在每次访问时进行检查。</li>
</ul>
<p>###0.2.4 对象管理器 Object Manager</p>
<ul>
<li>负责对象的命名，保护，分配和处理</li>
<li>管理的对象包括<ul>
<li>目录，文件，设备，符号链接</li>
<li>进程 ，线程</li>
<li>网络共享资源</li>
<li>端口</li>
<li>窗口</li>
</ul>
</li>
<li>每一个资源对象都与一个安全描述符相关联。</li>
</ul>
<h3 id="0-2-5-系统资源访问过程"><a href="#0-2-5-系统资源访问过程" class="headerlink" title="0.2.5 系统资源访问过程"></a>0.2.5 系统资源访问过程</h3><p><img src="/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%884.06.25.png" alt=""></p>
<h2 id="0-3-windows的用户和组"><a href="#0-3-windows的用户和组" class="headerlink" title="0.3 windows的用户和组"></a>0.3 windows的用户和组</h2><ul>
<li>用户账户<ul>
<li>使用用户名和密码进行标识</li>
<li>SID：账户的关键标识符，所有的内部进程都是用SID识别用户账号。</li>
</ul>
</li>
<li>用户组账户<ul>
<li>具有相似工作或资源要求的用户可组成一个用户组。</li>
<li>对资源的存取权限许可分配给一用户组，就是同时分配给该组中的所有成员。</li>
</ul>
</li>
<li>内置用户账号<ul>
<li>Aministrator 最高级别的账号，应重命名该账号并设置密码以隐藏它，以免受到攻击。</li>
<li>Guest 保持Guest账号的禁用状态。</li>
</ul>
</li>
<li>内置用户组账号<ul>
<li>Administrator：管理员组</li>
<li>USERS：普通用户组</li>
<li>Gusts：来宾用户组</li>
<li>Backup Operatoes：备份操作组，做系统的备份操作</li>
<li>Replicator:复制操作组</li>
<li>*Operators (Print，Accout, Server)</li>
<li>Domain：只在域服务器上的组</li>
<li>特殊组(Network,Intrative….)</li>
</ul>
</li>
</ul>
<h2 id="0-4工作组，域和信任关系"><a href="#0-4工作组，域和信任关系" class="headerlink" title="0.4工作组，域和信任关系"></a>0.4工作组，域和信任关系</h2><h3 id="0-4-1-工作组"><a href="#0-4-1-工作组" class="headerlink" title="0.4.1 工作组"></a>0.4.1 工作组</h3><ul>
<li>为小型办公系统提供了资源共享功能，使用户可共享其他计算机上的本地资源。</li>
<li>不共享任何用户账户信息和组账户信息，每个系统使用独立的SAM数据库独立验证。</li>
<li>适用于小型环境，不进行集中控制，用户数量增多时，难以管理。</li>
</ul>
<h3 id="0-4-2-Domain"><a href="#0-4-2-Domain" class="headerlink" title="0.4.2 Domain"></a>0.4.2 Domain</h3><ul>
<li><p>域是一批具有集中安全授权机构好若干台工作站和成员服务器得计算机集合、</p>
</li>
<li><p>特点</p>
<ul>
<li>域为用户，组合计算机账户定义了管理边界范围</li>
<li>一个域中的所有用户共享域用户账户数据库和普通的安全策略。</li>
<li>每台计算机不需要提供自己的验证服务。</li>
<li><p>一旦用户用域验证服务通过验证，就可以在域内访问权限内资源了<br>###0.4.3 信任关系</p>
</li>
<li><p>信任关系是域之间的关系</p>
<ul>
<li>当域之间建立信任关系后，一个域就可以信任另一个域中的用户访问自己的资源，而又不必在本域拥有这个用户的账户和口令。</li>
</ul>
</li>
<li>信任关系的好处<ul>
<li>实现跨域的集中安全验证</li>
<li>支持用户的单一登录</li>
</ul>
</li>
<li>信任关系的种类<ul>
<li>单向信任</li>
<li>双向信任</li>
<li>NT的信任关系是单向且不具有传递性，win2000之后默认信任关系是双向且可传递。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="0-4-5-域和工作组的对比"><a href="#0-4-5-域和工作组的对比" class="headerlink" title="0.4.5 域和工作组的对比"></a>0.4.5 域和工作组的对比</h3><ul>
<li><p>域可定义安全管理边界，工作组无集中管理，相互独立。</p>
<ul>
<li>域中所有用户共享普通的用户账户数据库和安全策略。</li>
<li>工作组中计算机使用本地账户和本地策略。</li>
</ul>
</li>
<li><p>验证</p>
<ul>
<li><p>安全账户数据库</p>
<p>工作组中计算机上的用户账户SAM，使用在登录本机时。当登录到域时用的是域上的用户账户数据库。</p>
</li>
<li><p>验证服务：</p>
<ul>
<li>域验证时，每台计算机不需要提供自己的验证服务</li>
<li>工作组中登录验证用的是本机的验证服务。</li>
</ul>
</li>
</ul>
</li>
<li><p>登陆成功访问范围：</p>
<p> 域在整个受信任域中访问许可的资源，工作组为本机资源。</p>
</li>
</ul>
<h1 id="0x01-活动目录"><a href="#0x01-活动目录" class="headerlink" title="0x01 活动目录"></a>0x01 活动目录</h1><p>活动目录提供了完全集成的在windows中的一个安全，分布式，可扩展以及重复的分层目录服务。</p>
<p>winserver AD 域服务的核心价值是提供一套完整的用户身份验证系统，这是一个基础身份验证平台，用户实现单点登录。在此基础上再实现对共享资源和服务的管理及访问。</p>
<h2 id="1-1基础"><a href="#1-1基础" class="headerlink" title="1.1基础"></a>1.1基础</h2><ul>
<li>活动目录是以层次化方式村塾网络资源信息的目录</li>
<li>通过它，组织机构可以有效地对分布式环境的网络对象进行共享和管理。</li>
<li>目录在网络安全方面扮演着中心授权机构的角色，从而使操作系统可以轻松验证用户身份并控制其对网络资源的访问。</li>
</ul>
<h2 id="1-2-活动目录功能的机制"><a href="#1-2-活动目录功能的机制" class="headerlink" title="1.2 活动目录功能的机制"></a>1.2 活动目录功能的机制</h2><p>单点登录，全局目录，智能的信息复制，组策略。</p>
<h3 id="1-2-1单点登录-kerberos"><a href="#1-2-1单点登录-kerberos" class="headerlink" title="1.2.1单点登录(kerberos)"></a>1.2.1单点登录(kerberos)</h3><p><img src="/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%886.56.28.png" alt="屏幕快照 2019-05-11 下午6.56.28"></p>
<p>###1.2.2全局目录</p>
<ul>
<li>默认情况下，全局目录在域森林的初始域控制器上自动创建，该域控制器就成为全局目录服务器。</li>
<li>全局目录是一个域树或者域森林中的所有对象信息的中心仓库。它记录了AD中所有域对象的部分信息，以及架构信息和配置信息的完整副本。</li>
<li>执行关键目录任务：登录和查询。</li>
</ul>
<p><strong>活动目录保存的信息</strong></p>
<ul>
<li><p>域数据</p>
<p>包含该域内所有对象信息，这些信息被复制到该域的每个域控制器(不超出域范围)</p>
</li>
<li><p>架构数据</p>
<p>定义了可在AD中存储哪些对象，属性和操作规则。属于目录林的范畴，在林中的每一个域控制器上存储。</p>
</li>
<li><p>配置数据</p>
<p>定义了复制拓扑与AD配置有关的其他数据，也被复制到森林的所有域控制器。</p>
</li>
<li><p>(若是GC服务器)</p>
<p>为所有的域保存”域数据”的部分副本。</p>
</li>
</ul>
<p><strong>全局目录的任务</strong></p>
<ul>
<li><p>在客户登录时，向域控制器提供通用组成员信息</p>
<p>用户登录网络时，必须存在一台全局目录服务器，否则只能登录到本地，例外是域管理员组中的成员。</p>
</li>
<li><p>在客户查询目录信息时：</p>
<p>查询请求首先会发送到最近的全局目录，当查询对象信息不在GC时，服务器才会将查询转至对象所在域。从而实现跨所有域的搜索。</p>
</li>
<li><p>注意</p>
<ul>
<li>多个GC会减少客服查询的时间，但是会导致网络的复制通信量增加。</li>
<li>推荐在每一个主要站点上设置一台GC。</li>
</ul>
</li>
</ul>
<h3 id="1-2-3智能的信息复制"><a href="#1-2-3智能的信息复制" class="headerlink" title="1.2.3智能的信息复制"></a>1.2.3智能的信息复制</h3><ul>
<li>通过安装域控制器，可在整个网络环境中创建多分副本。</li>
<li>网络任何地方发生的变化都会在整个网络中自动复制，保证数据一致性。</li>
</ul>
<h3 id="1-2-4组策略"><a href="#1-2-4组策略" class="headerlink" title="1.2.4组策略"></a>1.2.4组策略</h3><p>可在不同层次上定义控制规则</p>
<h2 id="1-3活动目录管理的对象"><a href="#1-3活动目录管理的对象" class="headerlink" title="1.3活动目录管理的对象"></a>1.3活动目录管理的对象</h2><ul>
<li><p>容器对象</p>
<p>可存储其他对象，如域，组织单元，文件夹等。</p>
</li>
<li><p>叶对象</p>
<p>不能存储其他对象，如计算机，用户，文件等。</p>
</li>
<li><p>常见对象</p>
</li>
</ul>
<p><img src="/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-11%20%E4%B8%8B%E5%8D%886.56.28-1.png" alt="屏幕快照 2019-05-11 下午6.56.28"></p>
<h3 id="1-3-1-对象标准属性"><a href="#1-3-1-对象标准属性" class="headerlink" title="1.3.1 对象标准属性"></a>1.3.1 对象标准属性</h3><ul>
<li><p>DN(识别名称)定义了LDAP中到对象的完整路径。</p>
<p>完整路径包括对象名称以及直到域根节点的所有父对象名称，DN标识了域层次中的唯一对象。</p>
</li>
<li><p>RDN(相对识别名称)是DN中属于对象完整路径属性的一部分。</p>
</li>
<li><p>全局唯一标识符(GUID)</p>
<p>GUID是对象创建时由活动目录分配的128位数字。每一位对象都具有唯一标示。GUID不能被修改和删除。</p>
</li>
<li><p>主体属性：安全主题名称</p>
<ul>
<li>安全主体分三类：用户，组，计算机。</li>
<li>在单个域内用来唯一标识用户，计算机或组的名称。</li>
<li>域内必须唯一，域间无需唯一。</li>
</ul>
</li>
<li><p>安全标识符(SID)</p>
<p>SID是Windows系统安全子系统为安全主体对象创建的唯一数字，属于主体属性。</p>
<p>win系统内部进程引用的是账户的SID，而不是账户的用户或者组名。</p>
</li>
<li><p>注意</p>
<ul>
<li><p>单一域内 SID,GUID,LDAP都可唯一的标识目录中的每个用户或计算机</p>
</li>
<li><p>当对象被重命名或移到另一个域内</p>
<p> SID,LADP专用名称以及相对专用名称都会改变。GUID不变。</p>
</li>
</ul>
</li>
</ul>
<h2 id="1-4-活动目录组件"><a href="#1-4-活动目录组件" class="headerlink" title="1.4 活动目录组件"></a>1.4 活动目录组件</h2><h3 id="1-4-1活动目录中资源组织的逻辑结构"><a href="#1-4-1活动目录中资源组织的逻辑结构" class="headerlink" title="1.4.1活动目录中资源组织的逻辑结构"></a>1.4.1活动目录中资源组织的逻辑结构</h3><ul>
<li><p>组织单位</p>
<p>主要用来委派对用户，组及资源集合的管理权限。组织单位是委派管理权限的最小分组，其特殊在于可连接组策略。</p>
<ul>
<li>分类组织对象</li>
<li>委派管理控制权</li>
<li>配置组策略</li>
</ul>
</li>
<li><p>域</p>
<ul>
<li>同一个域中的计算机共享配置，架构和全局目录</li>
<li>域是网络中复制和安全管理的基本单元</li>
</ul>
<p><strong>域控制器</strong></p>
<ul>
<li>域控制器保存了整个域范围内的目录数据，并管理用户域交互。</li>
<li>安装活动目录就能把windows服务器变成域控制器</li>
<li>一个域可以有多个域控制器，一个域控制器只能控制一个域</li>
<li>win2x中域控制器是对等角色；NT中有主域控制器(pdc)和备份域控制器(BDC),只有pdc有目录的可读写副本。</li>
<li>混合模式域和本地模式域<ul>
<li>混合模式：既有NT又有win2x域控制器的域(默认安装)</li>
<li>本地模式：只有win2x域控制器的域。</li>
<li>混合模式域升级到本地模式域不可逆</li>
</ul>
</li>
</ul>
</li>
<li><p>域树</p>
<p>具有连续命名空间的多个域成为树。</p>
<p><img src="/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-12%20%E4%B8%8B%E5%8D%883.11.59.png" alt=""></p>
</li>
</ul>
<ul>
<li><p>目录树中所有域共享相同的配置，架构和全局目录</p>
</li>
<li><p>通常我们将一个企业的总公司和分公司的域配置为树，其中总公司的域称为父域，分公司为子域。</p>
</li>
</ul>
<ul>
<li><p>域森林</p>
<p>不构成连续命名空间的域树的集合，这些目录树通过双向的可传递信任关系连接到一起。</p>
<p>AD中建立的第一个域被称为林的根域。</p>
</li>
</ul>
<h3 id="1-4-2-物理结构"><a href="#1-4-2-物理结构" class="headerlink" title="1.4.2 物理结构"></a>1.4.2 物理结构</h3><ul>
<li><p>站点</p>
<ul>
<li><p>是指一个由高速连接所形成的较快通信速率网络。一般指LAN。</p>
</li>
<li><p>主要用于：确定复制拓扑，以便进行有效而快速的复制。</p>
</li>
<li><p>站点链路并不是自动生成的，而是必须用Active Directory Sites And Snap-In工具来创建。</p>
</li>
</ul>
</li>
<li><p>活动目录复制</p>
</li>
<li><p>站点内复制</p>
<p><img src="/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-12%20%E4%B8%8B%E5%8D%883.29.50.png" alt=""></p>
</li>
</ul>
<pre><code>其中的三个域控制器复制森林的架构数据，配置数据以及具有每个对象完整属性的所有目录对象。
</code></pre><ul>
<li><p>站点间复制</p>
<ul>
<li>通过桥头堡控制器进行站点间复制。</li>
<li>如果是架构，配置信息每个域控制器都接受，如果是域数据信息，则只有全局目录服务器会接受它的部分副本。</li>
</ul>
</li>
<li><p>站点间连接</p>
<ul>
<li>两个或多个站点间的一个低带宽或不可靠连接</li>
<li>站点链接不是自动生成的，必须使用活动目录站点和服务工具来创建。</li>
<li>站点链接可传递。</li>
</ul>
</li>
</ul>
<ul>
<li><p>总结</p>
<ul>
<li><p>站点是对网络上计算机的实际的物理分布的客观反映</p>
</li>
<li><p>站点是独立于域的</p>
<ul>
<li>站点映射网络的物理结构，域映射组织的逻辑结构</li>
<li>网络的物理结构和域结构之间没有必然联系。</li>
<li>活动目录允许在一个站点出现多个域，与允许一个域出现在多个站点中。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-5活动目录搭建"><a href="#1-5活动目录搭建" class="headerlink" title="1.5活动目录搭建"></a>1.5活动目录搭建</h2><h1 id="0x02-组策略"><a href="#0x02-组策略" class="headerlink" title="0x02 组策略"></a>0x02 组策略</h1><h2 id="2-1组策略简介"><a href="#2-1组策略简介" class="headerlink" title="2.1组策略简介"></a>2.1组策略简介</h2><ul>
<li><p>是管理员针对网络中的用户和计算机所作的一系列设置</p>
</li>
<li><p>计算机和用户是仅有的接受组策略的活动目录对象类型</p>
<ul>
<li>计算机设置：提供计算机的基本设置<ul>
<li>计算机启动时生效，已启动时，域控5分钟，分域控90-120</li>
</ul>
</li>
<li>用户的设置：设置用户的环境<ul>
<li>登录时生效，用户已登录，每隔90-120分钟自动应用。</li>
</ul>
</li>
<li>手工强制刷新：gpupdate /force </li>
</ul>
</li>
<li><p>组策略使管理员可以集中控制用户环境，减轻管理负担</p>
</li>
<li><p>组策略对象(GPO)</p>
<p> 它存储了组策略的具体配置，每一个GPO都链接到一个具体的活动目录容器，包括站点，域组织单元。</p>
</li>
<li><p>组策略与活动目录的结合</p>
<ul>
<li>联合使用，则可实现策略的集中与分散管理，适应从小到大的各种规模。</li>
<li>组策略管理单元提供了管理组策略的自称工具，并提供了MMC管理工具的扩展。</li>
</ul>
</li>
</ul>
<h2 id="2-2组策略的设置对象"><a href="#2-2组策略的设置对象" class="headerlink" title="2.2组策略的设置对象"></a>2.2组策略的设置对象</h2><ul>
<li>针对站点，域，OU设置组策略</li>
<li>不在域内的可以利用本地组策略管理计算机</li>
</ul>
<h2 id="2-3组策略应用顺序"><a href="#2-3组策略应用顺序" class="headerlink" title="2.3组策略应用顺序"></a>2.3组策略应用顺序</h2><h3 id="2-3-1组策略继承"><a href="#2-3-1组策略继承" class="headerlink" title="2.3.1组策略继承"></a>2.3.1组策略继承</h3><ul>
<li>默认情况下，子容器继承父容器的策略设置</li>
<li>子容器设置优于父容器继承下来的设置</li>
</ul>
<h3 id="2-3-2累加性和相应优先级"><a href="#2-3-2累加性和相应优先级" class="headerlink" title="2.3.2累加性和相应优先级"></a>2.3.2累加性和相应优先级</h3><ul>
<li><p>组策略默认的处理顺序</p>
<ul>
<li>本地策略对象</li>
<li>链接在站点上的GPO</li>
<li>链接在域上的GPO</li>
<li>链接在OU上的GPO对象</li>
</ul>
</li>
<li><p>注意：</p>
<ul>
<li>排在最后的GPO被最后处理，因此具有最高的优先级。</li>
<li>工作组成员只处理本地组策略对象</li>
</ul>
</li>
<li><p>默认处理顺序的例外</p>
<ul>
<li><p>“禁止替代”选项：防止随后处理的组策略对象覆盖该组策略对象中的策略设置。</p>
<p>如果发生冲突，优先采用在活动目录层次架构中更高层的那一个。</p>
</li>
<li><p>“阻止策略继承”选项</p>
<ul>
<li>任何一个站点，域或组织单元上，都可以被选择性标记为组织策略继承，来禁止从父目录容器继承组策略。</li>
<li>设置为”禁止替代”的组策略对象链接将始终都会被采用，且不能阻止。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-3-3-首先处理计算机配置，然后处理用户"><a href="#2-3-3-首先处理计算机配置，然后处理用户" class="headerlink" title="2.3.3 首先处理计算机配置，然后处理用户"></a>2.3.3 首先处理计算机配置，然后处理用户</h3><ul>
<li><p>组策略对象可以禁止其用户设置或者计算机设置，默认都不禁止。</p>
</li>
<li><p>环回选项</p>
<ul>
<li><p>替换模式</p>
<p>用户GPO列表在启动启动时整体被计算的GPO替代</p>
</li>
<li><p>合并模式</p>
<p>计算机GPO添加到用户的GPO列表，计算的GPO具有更高的优先权。</p>
</li>
</ul>
</li>
</ul>
<h2 id="2-4组策略的处理总结"><a href="#2-4组策略的处理总结" class="headerlink" title="2.4组策略的处理总结"></a>2.4组策略的处理总结</h2><ul>
<li>组策略能够从站点，域和最后的组织单元继承而来</li>
<li>应用组策略对象的顺序和级别决定了用户和计算机实际能收到的组策略设置</li>
<li>组策略能够在站点，域，组织单元上被阻塞</li>
<li>组策略本身还能够以非覆盖的方式来强制实施</li>
<li>组策略可以有条件的实施和执行</li>
</ul>
<h2 id="2-5组策略的实现和管理"><a href="#2-5组策略的实现和管理" class="headerlink" title="2.5组策略的实现和管理"></a>2.5组策略的实现和管理</h2><h1 id="0x03公钥基础结构PKI"><a href="#0x03公钥基础结构PKI" class="headerlink" title="0x03公钥基础结构PKI"></a>0x03公钥基础结构PKI</h1><p>PKI是一组组件和规程，用非对称密码算法原理和技术实现的安全基础设施。</p>
<h2 id="3-1-PKI的组件"><a href="#3-1-PKI的组件" class="headerlink" title="3.1 PKI的组件"></a>3.1 PKI的组件</h2><h3 id="3-1-1核心块"><a href="#3-1-1核心块" class="headerlink" title="3.1.1核心块"></a>3.1.1核心块</h3><p>证书</p>
<p>认证机构</p>
<p>证书吊销列表</p>
<h3 id="3-1-2-组件1-证书注册机构RA"><a href="#3-1-2-组件1-证书注册机构RA" class="headerlink" title="3.1.2 组件1 证书注册机构RA"></a>3.1.2 组件1 证书注册机构RA</h3><ul>
<li><p>CA委派给注册权威机构RA一些责任</p>
<ul>
<li>个人认证，令牌分发</li>
<li>吊销报告，名称指定</li>
<li>密钥生成，存储密钥对</li>
</ul>
</li>
<li><p>多数情况下，RA用于在证书登记过程中核实证书申请者的身份。</p>
</li>
</ul>
<h3 id="3-1-3-组件2-证书颁发机构-CA"><a href="#3-1-3-组件2-证书颁发机构-CA" class="headerlink" title="3.1.3 组件2 证书颁发机构 CA"></a>3.1.3 组件2 证书颁发机构 CA</h3><ul>
<li><p>CA是公钥基础设施中受信任的第三方实体</p>
</li>
<li><p>CA向主体颁发证书</p>
</li>
<li><p>续借和更新证书</p>
</li>
<li><p>CA是信任的起点<br> 第三方信任指两个实体从前没有信任关系，但双方与共同的第三方有信任关系，由此建立起来的信任。<br> PKI中，第三方就是CA。通常是国家认定的权威机构。</p>
</li>
<li><p>证书将主体公钥和名字等其他信息绑定起来，CA使用它的签名私钥对证书信息进行数字签名。</p>
</li>
<li><p>CA机构的数字签名使得攻击者不能伪造和篡改证书，CA不能否认它签名的证书。</p>
</li>
</ul>
<h3 id="3-1-4-组件3-证书库"><a href="#3-1-4-组件3-证书库" class="headerlink" title="3.1.4 组件3 证书库"></a>3.1.4 组件3 证书库</h3><ul>
<li>目录服务是一个在线存储库，目录服务包含对象的有关信息。</li>
<li>LDAP 轻量级目录访问协议</li>
<li>PKI实现中FTP服务器和Web服务器可以作为存储库</li>
</ul>
<h3 id="3-1-5-组件4-档案库"><a href="#3-1-5-组件4-档案库" class="headerlink" title="3.1.5 组件4 档案库"></a>3.1.5 组件4 档案库</h3><p>档案库是一个被用来解决将来争执的信息库，为CA承担长期存储文档信息的责任。</p>
<p>档案的主要任务是存储和保护充足的信息来决定在一份旧的文档中数字签名是可以信任的。</p>
<h3 id="3-1-6-组件5-密钥备份及恢复系统"><a href="#3-1-6-组件5-密钥备份及恢复系统" class="headerlink" title="3.1.6 组件5 密钥备份及恢复系统"></a>3.1.6 组件5 密钥备份及恢复系统</h3><ul>
<li>密钥备份与恢复应由可信机构来完成</li>
<li>密钥的备份与恢复只能针对解密私钥，不能备份签名私钥</li>
</ul>
<h3 id="3-1-7-组件6-证书吊销-CRL"><a href="#3-1-7-组件6-证书吊销-CRL" class="headerlink" title="3.1.7 组件6 证书吊销 CRL"></a>3.1.7 组件6 证书吊销 CRL</h3><p>证书在有效期之内由于某些原因可能需要废除。</p>
<p>CRL的数据结构类似于证书</p>
<h3 id="3-1-8-组件7-PKI应用系统接口"><a href="#3-1-8-组件7-PKI应用系统接口" class="headerlink" title="3.1.8 组件7 PKI应用系统接口"></a>3.1.8 组件7 PKI应用系统接口</h3><ul>
<li>pKI的价值在于使用户能够方便地使用加密，数字签名等安全服务</li>
<li>一个完整的PKI必须提供良好的应用接口，使各种应用能够与PKI交互，确保所建立的网络环境的可信性。</li>
</ul>
<h2 id="3-3-证书的使用及验证"><a href="#3-3-证书的使用及验证" class="headerlink" title="3.3 证书的使用及验证"></a>3.3 证书的使用及验证</h2><h1 id="0x04-文件系统"><a href="#0x04-文件系统" class="headerlink" title="0x04 文件系统"></a>0x04 文件系统</h1><h2 id="4-1文件系统基础"><a href="#4-1文件系统基础" class="headerlink" title="4.1文件系统基础"></a>4.1文件系统基础</h2><ul>
<li><p>机器硬盘，固态硬盘。</p>
</li>
<li><p>基本分区</p>
<p>MBR磁盘 ：32位 x86硬盘系统</p>
<ul>
<li>引导盘的第一个扇区</li>
</ul>
<p>GPT磁盘 ：64位 Itanium处理器</p>
</li>
<li><p>DBR:引导扇区，文件系统的第一个扇区、</p>
</li>
<li><p>MFT文件记录结构</p>
<ul>
<li>每个记录项分为记录头和属性列表两个部分</li>
<li>记录头里包含了本记录向的总体情况和信息</li>
<li>属性列表列出了该文件的所有属性</li>
</ul>
</li>
</ul>
<h2 id="4-2NTFS"><a href="#4-2NTFS" class="headerlink" title="4.2NTFS"></a>4.2NTFS</h2><p>又称文件夹与文件的访问权限。NTFS分为特殊访问和标准访问权限。特殊权限是最小粒度的权限，标准权限是将某些常用的特殊权限配套组成的六种。</p>
<ul>
<li>权限控制的原则<ul>
<li>权限积累</li>
<li>以文件夹为权限的设置对象</li>
<li>拒绝权限优于其他权限</li>
</ul>
</li>
</ul>
<h2 id="4-3-EFS"><a href="#4-3-EFS" class="headerlink" title="4.3 EFS"></a>4.3 EFS</h2><ul>
<li>基于混合加密机制</li>
<li>EFS机制</li>
<li>提供数据恢复功能</li>
</ul>
<h3 id="4-3-1加密过程"><a href="#4-3-1加密过程" class="headerlink" title="4.3.1加密过程"></a>4.3.1加密过程</h3><ul>
<li><p>文件被考到临时文本文件</p>
</li>
<li><p>文件被一个随机生成的key加密</p>
</li>
<li><p>用户公钥对FEK加密，数据解密区生产。</p>
</li>
<li>使用恢复代理的公钥对FEK加密，数去恢复区域产生</li>
<li>所有内容被写进磁盘</li>
<li>临时文件删除</li>
</ul>
<h3 id="4-3-2"><a href="#4-3-2" class="headerlink" title="4.3.2"></a>4.3.2</h3><ul>
<li>DDF以及私钥对FEK解密</li>
<li>FEK解密文件</li>
</ul>
<h3 id="4-3-3优势"><a href="#4-3-3优势" class="headerlink" title="4.3.3优势"></a>4.3.3优势</h3><p>基于公钥与文件系统紧密结合的加密技术</p>
<p>操作上完全透明</p>
<p>支持对单个文件或文件夹加解密</p>
<p>提供数据恢复</p>
<h3 id="4-3-4-局限性"><a href="#4-3-4-局限性" class="headerlink" title="4.3.4 局限性"></a>4.3.4 局限性</h3><ul>
<li>增加花费，降低性能</li>
<li>无法检测到病毒</li>
<li>恢复代理影响性能</li>
<li>EFS对一切进程，系统中如有泄密者可将文件传出。</li>
</ul>
<h2 id="4-4-磁盘配额"><a href="#4-4-磁盘配额" class="headerlink" title="4.4 磁盘配额"></a>4.4 磁盘配额</h2><ul>
<li><p>作用</p>
<p>避免由于磁盘空间使用的失控可能造成的系统崩溃。</p>
</li>
<li><p>配额是以文件所有权为基础的，不受位置限制。</p>
</li>
<li><p>只适用于卷，且不受卷的文件夹结构以物理磁盘影响。</p>
</li>
</ul>
<h2 id="4-5-数据备份的策略，RAID机制的几种备份机制"><a href="#4-5-数据备份的策略，RAID机制的几种备份机制" class="headerlink" title="4.5 数据备份的策略，RAID机制的几种备份机制"></a>4.5 数据备份的策略，RAID机制的几种备份机制</h2><h3 id="4-5-1完全备份"><a href="#4-5-1完全备份" class="headerlink" title="4.5.1完全备份"></a>4.5.1完全备份</h3><h3 id="4-5-2差异备份"><a href="#4-5-2差异备份" class="headerlink" title="4.5.2差异备份"></a>4.5.2差异备份</h3><p>在一次完全备份后对修改的文件备份。不清除标记。</p>
<h3 id="4-5-3增量备份"><a href="#4-5-3增量备份" class="headerlink" title="4.5.3增量备份"></a>4.5.3增量备份</h3><p>备份自上一次备份之后有变化的数据。清除标记。</p>
<h2 id="4-6-数据恢复机制"><a href="#4-6-数据恢复机制" class="headerlink" title="4.6 数据恢复机制"></a>4.6 数据恢复机制</h2><h1 id="0x05身份验证"><a href="#0x05身份验证" class="headerlink" title="0x05身份验证"></a>0x05身份验证</h1><h2 id="5-1-针对字典，穷举攻击的防范策略"><a href="#5-1-针对字典，穷举攻击的防范策略" class="headerlink" title="5.1 针对字典，穷举攻击的防范策略"></a>5.1 针对字典，穷举攻击的防范策略</h2><p>操作系统认证过程有一定的时延，增大穷举难度</p>
<p>多重口令。组合口令。</p>
<p><strong>安全策略设定</strong></p>
<ul>
<li>账号策略，密码策略和kerberos策略<ul>
<li>启动口令复杂化</li>
<li>设定账户锁定阈值</li>
<li>启动日志审计功能</li>
<li>禁用无人使用账户，锁定ADMIN账户</li>
</ul>
</li>
<li>在域环境中，账户设置一般在域策略中制定，应用于整个域的所有计算机上。</li>
</ul>
<h2 id="5-2交互式本地登录，域登录各组件作用"><a href="#5-2交互式本地登录，域登录各组件作用" class="headerlink" title="5.2交互式本地登录，域登录各组件作用"></a>5.2交互式本地登录，域登录各组件作用</h2><h3 id="5-2-1-winlogon"><a href="#5-2-1-winlogon" class="headerlink" title="5.2.1 winlogon"></a>5.2.1 winlogon</h3><ul>
<li>注册SAS，默认为Ctrl+Alt+Del</li>
<li>加载GINA和身份验证程序包</li>
<li>生成三个桌面</li>
<li>向GINA发送事件通知消息，提供GINA调用的接口函数。</li>
<li>保证操作对其他进程不可见。</li>
</ul>
<h3 id="5-2-2-GINA动态链接库"><a href="#5-2-2-GINA动态链接库" class="headerlink" title="5.2.2 GINA动态链接库"></a>5.2.2 GINA动态链接库</h3><p>提供了winlogon用户表示和验证用户的输出函数</p>
<h3 id="5-2-3-网络提供程序的动态链接库"><a href="#5-2-3-网络提供程序的动态链接库" class="headerlink" title="5.2.3 网络提供程序的动态链接库"></a>5.2.3 网络提供程序的动态链接库</h3><p>提供通过标准协议到其他类型的网络的辅助身份验证功能。</p>
<h2 id="5-3-kerberos用户身份验证服务和票据授予服务"><a href="#5-3-kerberos用户身份验证服务和票据授予服务" class="headerlink" title="5.3 kerberos用户身份验证服务和票据授予服务"></a>5.3 kerberos用户身份验证服务和票据授予服务</h2><p>kerberos在对称加密基础上，基于可信赖的第三方实现分布式环境下的双向用户实时认证，保证数据的安全传输。</p>
<p>实现用户级身份认证，并通过构造适当票据格式和认证符防止IP地址伪造和重放。</p>
<ul>
<li><p>第一 从AS服务器中获取TGT票据</p>
<p>C输入密码，得到Kc,tgs  Ticket tgs.</p>
</li>
<li><p>第二 用户C从TGS服务器获取票据tickets</p>
<p>C得到Kc，s  Tickets</p>
</li>
<li><p>第三 访问服务</p>
</li>
</ul>
<h1 id="0x06-访问控制"><a href="#0x06-访问控制" class="headerlink" title="0x06 访问控制"></a>0x06 访问控制</h1><p>限制访问主体对访问客体的访问权限，从而使计算机系统在合法范围内使用</p>
<h2 id="6-1windows的访问控制模型及组件"><a href="#6-1windows的访问控制模型及组件" class="headerlink" title="6.1windows的访问控制模型及组件"></a>6.1windows的访问控制模型及组件</h2><p><img src="/2019/05/11/操作系统安全/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-05-14%20%E4%B8%8A%E5%8D%8811.27.33.png" alt=""></p>
<h2 id="6-2-主体和客体的安全描述"><a href="#6-2-主体和客体的安全描述" class="headerlink" title="6.2 主体和客体的安全描述"></a>6.2 主体和客体的安全描述</h2><ul>
<li><p>主体：访问令牌</p>
<p>用户认证通过后，系统为其创建访问令牌，线程获取令牌的拷贝</p>
</li>
<li><p>程序请求访问客体时，提交令牌，SRM使用令牌与客体的安全描述进行比较来执行访问检查和控制</p>
</li>
<li><p>客体：安全描述符</p>
<p>每一个安全性对象都有一个安全性描述符。</p>
<ul>
<li>对象所有者的SIP</li>
<li>基本所有组的SID</li>
<li>自定义的访问控制列表</li>
<li>系统访问控制列表</li>
</ul>
</li>
</ul>
<h2 id="6-3-客体中策略的冲突解决办法"><a href="#6-3-客体中策略的冲突解决办法" class="headerlink" title="6.3 客体中策略的冲突解决办法"></a>6.3 客体中策略的冲突解决办法</h2><ul>
<li>直接把访问及控制信息分配给对象</li>
<li>从父对象中检查可继承的访问控制信息。(下级的优先权更高)</li>
<li>OM所提供的默认访问控制信息，并分配给对象。</li>
</ul>
<h2 id="6-4-分布式访问控制实现"><a href="#6-4-分布式访问控制实现" class="headerlink" title="6.4 分布式访问控制实现"></a>6.4 分布式访问控制实现</h2><p>​    </p>
<h1 id="0x07网络传输安全"><a href="#0x07网络传输安全" class="headerlink" title="0x07网络传输安全"></a>0x07网络传输安全</h1><h2 id="7-1-IPSEC封装协议"><a href="#7-1-IPSEC封装协议" class="headerlink" title="7.1 IPSEC封装协议"></a>7.1 IPSEC封装协议</h2><ul>
<li><p>IPsec是一种网络层保护协议</p>
<p>通过对传输前每个IP数据包进行保护来保障网络传输。</p>
</li>
<li><p>作用：提供了身份验证，机密性，完整性三个安全服务。防止重放</p>
</li>
</ul>
<h3 id="7-1-1-工作模式"><a href="#7-1-1-工作模式" class="headerlink" title="7.1.1 工作模式"></a>7.1.1 工作模式</h3><ul>
<li><p>传输模式</p>
<p>两部主机之前，端对端。</p>
</li>
<li><p>隧道模式</p>
<p>两个不同网段所传送的数据内容加密，适于建立安全VPN隧道。网关对网关。</p>
</li>
</ul>
<h3 id="7-1-2-安全协议"><a href="#7-1-2-安全协议" class="headerlink" title="7.1.2 安全协议"></a>7.1.2 安全协议</h3><p>IPSEC由一系列安全协议组成，它把通信过程分成协商和数据交互两个阶段。</p>
<ul>
<li>协商：通信双方互相认证对方的身份，并根据安全策略协商使用的加密。认证算法，生成共享的会话密钥。</li>
<li>数据交互：利用商量好的算法和密钥对数据进行安全处理。</li>
</ul>
<h2 id="7-2-直接访问-主机对主机"><a href="#7-2-直接访问-主机对主机" class="headerlink" title="7.2 直接访问 主机对主机"></a>7.2 直接访问 主机对主机</h2><h2 id="7-3-VPN访问"><a href="#7-3-VPN访问" class="headerlink" title="7.3 VPN访问"></a>7.3 VPN访问</h2>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/05/28/QWB2019-writeup/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          QWB2019_writeup
        
      </div>
    </a>
  
  
    <a href="/2019/04/05/phpshe前台两个注入/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">phpshe前台两个注入</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#0x00-基本概念"><span class="nav-number">1.</span> <span class="nav-text">0x00 基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#0-1-信息安全评估标准-TCSEC"><span class="nav-number">1.1.</span> <span class="nav-text">0.1 信息安全评估标准 TCSEC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0-2-windows系统安全概述"><span class="nav-number">1.2.</span> <span class="nav-text">0.2.windows系统安全概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#0-2-1win的安全体系结构"><span class="nav-number">1.2.1.</span> <span class="nav-text">0.2.1win的安全体系结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-2-2-本地安全授权-LSA"><span class="nav-number">1.2.2.</span> <span class="nav-text">0.2.2 本地安全授权 LSA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-2-3-安全引用监控器SRM"><span class="nav-number">1.2.3.</span> <span class="nav-text">0.2.3 安全引用监控器SRM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-2-5-系统资源访问过程"><span class="nav-number">1.2.4.</span> <span class="nav-text">0.2.5 系统资源访问过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0-3-windows的用户和组"><span class="nav-number">1.3.</span> <span class="nav-text">0.3 windows的用户和组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0-4工作组，域和信任关系"><span class="nav-number">1.4.</span> <span class="nav-text">0.4工作组，域和信任关系</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#0-4-1-工作组"><span class="nav-number">1.4.1.</span> <span class="nav-text">0.4.1 工作组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-4-2-Domain"><span class="nav-number">1.4.2.</span> <span class="nav-text">0.4.2 Domain</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-4-5-域和工作组的对比"><span class="nav-number">1.4.3.</span> <span class="nav-text">0.4.5 域和工作组的对比</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x01-活动目录"><span class="nav-number">2.</span> <span class="nav-text">0x01 活动目录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1基础"><span class="nav-number">2.1.</span> <span class="nav-text">1.1基础</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-活动目录功能的机制"><span class="nav-number">2.2.</span> <span class="nav-text">1.2 活动目录功能的机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-1单点登录-kerberos"><span class="nav-number">2.2.1.</span> <span class="nav-text">1.2.1单点登录(kerberos)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-3智能的信息复制"><span class="nav-number">2.2.2.</span> <span class="nav-text">1.2.3智能的信息复制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-4组策略"><span class="nav-number">2.2.3.</span> <span class="nav-text">1.2.4组策略</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3活动目录管理的对象"><span class="nav-number">2.3.</span> <span class="nav-text">1.3活动目录管理的对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-1-对象标准属性"><span class="nav-number">2.3.1.</span> <span class="nav-text">1.3.1 对象标准属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-活动目录组件"><span class="nav-number">2.4.</span> <span class="nav-text">1.4 活动目录组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-1活动目录中资源组织的逻辑结构"><span class="nav-number">2.4.1.</span> <span class="nav-text">1.4.1活动目录中资源组织的逻辑结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-2-物理结构"><span class="nav-number">2.4.2.</span> <span class="nav-text">1.4.2 物理结构</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5活动目录搭建"><span class="nav-number">2.5.</span> <span class="nav-text">1.5活动目录搭建</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x02-组策略"><span class="nav-number">3.</span> <span class="nav-text">0x02 组策略</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1组策略简介"><span class="nav-number">3.1.</span> <span class="nav-text">2.1组策略简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2组策略的设置对象"><span class="nav-number">3.2.</span> <span class="nav-text">2.2组策略的设置对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3组策略应用顺序"><span class="nav-number">3.3.</span> <span class="nav-text">2.3组策略应用顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-1组策略继承"><span class="nav-number">3.3.1.</span> <span class="nav-text">2.3.1组策略继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-2累加性和相应优先级"><span class="nav-number">3.3.2.</span> <span class="nav-text">2.3.2累加性和相应优先级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-3-首先处理计算机配置，然后处理用户"><span class="nav-number">3.3.3.</span> <span class="nav-text">2.3.3 首先处理计算机配置，然后处理用户</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4组策略的处理总结"><span class="nav-number">3.4.</span> <span class="nav-text">2.4组策略的处理总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5组策略的实现和管理"><span class="nav-number">3.5.</span> <span class="nav-text">2.5组策略的实现和管理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x03公钥基础结构PKI"><span class="nav-number">4.</span> <span class="nav-text">0x03公钥基础结构PKI</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-PKI的组件"><span class="nav-number">4.1.</span> <span class="nav-text">3.1 PKI的组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1核心块"><span class="nav-number">4.1.1.</span> <span class="nav-text">3.1.1核心块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-组件1-证书注册机构RA"><span class="nav-number">4.1.2.</span> <span class="nav-text">3.1.2 组件1 证书注册机构RA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-3-组件2-证书颁发机构-CA"><span class="nav-number">4.1.3.</span> <span class="nav-text">3.1.3 组件2 证书颁发机构 CA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-4-组件3-证书库"><span class="nav-number">4.1.4.</span> <span class="nav-text">3.1.4 组件3 证书库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-5-组件4-档案库"><span class="nav-number">4.1.5.</span> <span class="nav-text">3.1.5 组件4 档案库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-6-组件5-密钥备份及恢复系统"><span class="nav-number">4.1.6.</span> <span class="nav-text">3.1.6 组件5 密钥备份及恢复系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-7-组件6-证书吊销-CRL"><span class="nav-number">4.1.7.</span> <span class="nav-text">3.1.7 组件6 证书吊销 CRL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-8-组件7-PKI应用系统接口"><span class="nav-number">4.1.8.</span> <span class="nav-text">3.1.8 组件7 PKI应用系统接口</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-证书的使用及验证"><span class="nav-number">4.2.</span> <span class="nav-text">3.3 证书的使用及验证</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x04-文件系统"><span class="nav-number">5.</span> <span class="nav-text">0x04 文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1文件系统基础"><span class="nav-number">5.1.</span> <span class="nav-text">4.1文件系统基础</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2NTFS"><span class="nav-number">5.2.</span> <span class="nav-text">4.2NTFS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-EFS"><span class="nav-number">5.3.</span> <span class="nav-text">4.3 EFS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-1加密过程"><span class="nav-number">5.3.1.</span> <span class="nav-text">4.3.1加密过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-2"><span class="nav-number">5.3.2.</span> <span class="nav-text">4.3.2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-3优势"><span class="nav-number">5.3.3.</span> <span class="nav-text">4.3.3优势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-4-局限性"><span class="nav-number">5.3.4.</span> <span class="nav-text">4.3.4 局限性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-磁盘配额"><span class="nav-number">5.4.</span> <span class="nav-text">4.4 磁盘配额</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-数据备份的策略，RAID机制的几种备份机制"><span class="nav-number">5.5.</span> <span class="nav-text">4.5 数据备份的策略，RAID机制的几种备份机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-1完全备份"><span class="nav-number">5.5.1.</span> <span class="nav-text">4.5.1完全备份</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-2差异备份"><span class="nav-number">5.5.2.</span> <span class="nav-text">4.5.2差异备份</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-3增量备份"><span class="nav-number">5.5.3.</span> <span class="nav-text">4.5.3增量备份</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-6-数据恢复机制"><span class="nav-number">5.6.</span> <span class="nav-text">4.6 数据恢复机制</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x05身份验证"><span class="nav-number">6.</span> <span class="nav-text">0x05身份验证</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-针对字典，穷举攻击的防范策略"><span class="nav-number">6.1.</span> <span class="nav-text">5.1 针对字典，穷举攻击的防范策略</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2交互式本地登录，域登录各组件作用"><span class="nav-number">6.2.</span> <span class="nav-text">5.2交互式本地登录，域登录各组件作用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-1-winlogon"><span class="nav-number">6.2.1.</span> <span class="nav-text">5.2.1 winlogon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-2-GINA动态链接库"><span class="nav-number">6.2.2.</span> <span class="nav-text">5.2.2 GINA动态链接库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-3-网络提供程序的动态链接库"><span class="nav-number">6.2.3.</span> <span class="nav-text">5.2.3 网络提供程序的动态链接库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-kerberos用户身份验证服务和票据授予服务"><span class="nav-number">6.3.</span> <span class="nav-text">5.3 kerberos用户身份验证服务和票据授予服务</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x06-访问控制"><span class="nav-number">7.</span> <span class="nav-text">0x06 访问控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1windows的访问控制模型及组件"><span class="nav-number">7.1.</span> <span class="nav-text">6.1windows的访问控制模型及组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-主体和客体的安全描述"><span class="nav-number">7.2.</span> <span class="nav-text">6.2 主体和客体的安全描述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-客体中策略的冲突解决办法"><span class="nav-number">7.3.</span> <span class="nav-text">6.3 客体中策略的冲突解决办法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-分布式访问控制实现"><span class="nav-number">7.4.</span> <span class="nav-text">6.4 分布式访问控制实现</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#0x07网络传输安全"><span class="nav-number">8.</span> <span class="nav-text">0x07网络传输安全</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-IPSEC封装协议"><span class="nav-number">8.1.</span> <span class="nav-text">7.1 IPSEC封装协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-1-工作模式"><span class="nav-number">8.1.1.</span> <span class="nav-text">7.1.1 工作模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-2-安全协议"><span class="nav-number">8.1.2.</span> <span class="nav-text">7.1.2 安全协议</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-直接访问-主机对主机"><span class="nav-number">8.2.</span> <span class="nav-text">7.2 直接访问 主机对主机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-VPN访问"><span class="nav-number">8.3.</span> <span class="nav-text">7.3 VPN访问</span></a></li></ol></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/friend" class="mobile-nav-link">Friend</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 Altm4nz All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/main.js"></script>








	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
